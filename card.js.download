(()=>{"use strict";var t={"./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js":(t,e,n)=>{function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.r(e),n.d(e,{default:()=>o})},"./node_modules/@babel/runtime/helpers/esm/classCallCheck.js":(t,e,n)=>{function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.r(e),n.d(e,{default:()=>o})},"./node_modules/@babel/runtime/helpers/esm/construct.js":(t,e,n)=>{n.r(e),n.d(e,{default:()=>r});var o=n("./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js");function r(t,e,n){return r=(0,a.default)()?Reflect.construct.bind():function(t,e,n){var a=[null];a.push.apply(a,e);var r=new(Function.bind.apply(t,a));return n&&(0,o.default)(r,n.prototype),r},r.apply(null,arguments)}},"./node_modules/@babel/runtime/helpers/esm/createClass.js":(t,e,n)=>{n.r(e),n.d(e,{default:()=>r});var o=n("./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js");function a(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,(0,o.default)(a.key),a)}}function r(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}},"./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js":(t,e,n)=>{function o(t){return o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},o(t)}n.r(e),n.d(e,{default:()=>o})},"./node_modules/@babel/runtime/helpers/esm/inherits.js":(t,e,n)=>{n.r(e),n.d(e,{default:()=>a});var o=n("./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js");function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&(0,o.default)(t,e)}},"./node_modules/@babel/runtime/helpers/esm/isNativeFunction.js":(t,e,n)=>{function o(t){return-1!==Function.toString.call(t).indexOf("[native code]")}n.r(e),n.d(e,{default:()=>o})},"./node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js":(t,e,n)=>{function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}n.r(e),n.d(e,{default:()=>o})},"./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js":(t,e,n)=>{n.r(e),n.d(e,{default:()=>r});var o=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),a=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");function r(t,e){if(e&&("object"===(0,o.default)(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return(0,a.default)(t)}},"./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js":(t,e,n)=>{function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}n.r(e),n.d(e,{default:()=>o})},"./node_modules/@babel/runtime/helpers/esm/toPrimitive.js":(t,e,n)=>{n.r(e),n.d(e,{default:()=>a});var o=n("./node_modules/@babel/runtime/helpers/esm/typeof.js");function a(t,e){if("object"!==(0,o.default)(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,e||"default");if("object"!==(0,o.default)(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}},"./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js":(t,e,n)=>{n.r(e),n.d(e,{default:()=>r});var o=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),a=n("./node_modules/@babel/runtime/helpers/esm/toPrimitive.js");function r(t){var e=(0,a.default)(t,"string");return"symbol"===(0,o.default)(e)?e:String(e)}},"./node_modules/@babel/runtime/helpers/esm/typeof.js":(t,e,n)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}n.r(e),n.d(e,{default:()=>o})},"./node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js":(t,e,n)=>{n.r(e),n.d(e,{default:()=>s});var o=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js"),r=n("./node_modules/@babel/runtime/helpers/esm/isNativeFunction.js"),i=n("./node_modules/@babel/runtime/helpers/esm/construct.js");function s(t){var e="function"==typeof Map?new Map:void 0;return s=function(t){if(null===t||!(0,r.default)(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return(0,i.default)(t,arguments,(0,o.default)(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),(0,a.default)(n,t)},s(t)}}},e={};function n(o){var a=e[o];if(void 0!==a)return a.exports;var r=e[o]={exports:{}};return t[o](r,r.exports,n),r.exports}n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var o={};(()=>{n.r(o);var t=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),e=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),i=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=(0,i.default)(t);if(e){var a=(0,i.default)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return(0,r.default)(this,n)}}var c=function(n){(0,a.default)(r,n);var o=s(r);function r(){return(0,t.default)(this,r),o.call(this)}return(0,e.default)(r,[{key:"connectedCallback",value:function(){var t,e=this;this.product=this.product||JSON.parse(this.getAttribute("product")),"ready"===(null===(t=window.app)||void 0===t?void 0:t.status)?this.onReady():document.addEventListener("theme::ready",(function(){return e.onReady()}))}},{key:"onReady",value:function(){var t=this;this.fitImageHeight=salla.config.get("store.settings.product.fit_type"),salla.wishlist.event.onAdded((function(e,n){return t.toggleFavoriteIcon(n)})),salla.wishlist.event.onRemoved((function(e,n){return t.toggleFavoriteIcon(n,!1)})),this.placeholder=salla.url.asset(salla.config.get("theme.settings.placeholder")),this.getProps(),this.source=salla.config.get("page.slug"),"landing-page"==this.source&&(this.hideAddBtn=!0,this.showQuantity=!0),salla.lang.onLoaded((function(){t.remained=salla.lang.get("pages.products.remained"),t.donationAmount=salla.lang.get("pages.products.donation_amount"),t.startingPrice=salla.lang.get("pages.products.starting_price"),t.addToCart=salla.lang.get("pages.cart.add_to_cart"),t.outOfStock=salla.lang.get("pages.products.out_of_stock"),t.render()})),this.render()}},{key:"initCircleBar",value:function(){var t=100-this.product.quantity/(this.product.quantity>100?2*this.product.quantity:100)*100;this.querySelector(".s-product-card-content-pie-svg-bar").style.strokeDashoffset=t}},{key:"toggleFavoriteIcon",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];document.querySelectorAll('.s-product-card-wishlist-btn[data-id="'+t+'"]').forEach((function(t){app.toggleElementClassIf(t,"s-product-card-wishlist-added","not-added",(function(){return e})),app.toggleElementClassIf(t,"pulse-anime","un-favorited",(function(){return e}))}))}},{key:"formatDate",value:function(t){var e=new Date(t);return"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate())}},{key:"getProductBadge",value:function(){var t,e,n;return this.product.promotion_title?'<div class="s-product-card-promotion-title" style="background-color:'.concat(this.card_promo_bg,'">').concat(this.product.promotion_title,"</div>"):this.showQuantity&&null!==(t=this.product)&&void 0!==t&&t.quantity?'<div\n        class="s-product-card-quantity">'.concat(this.remained," ").concat(salla.helpers.number(null===(n=this.product)||void 0===n?void 0:n.quantity),"</div>"):this.showQuantity&&null!==(e=this.product)&&void 0!==e&&e.is_out_of_stock?'<div class="s-product-card-out-badge">'.concat(this.outOfStock,"</div>"):""}},{key:"getPriceFormat",value:function(t){return t&&0!=t?salla.money(t):salla.config.get("store.settings.product.show_price_as_dash")?"-":""}},{key:"parseDate",value:function(t){var e=new Date(1e3*t),n=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return"".concat(n,"/").concat(o,"/").concat(a)}},{key:"getProductPrice",value:function(){var t,e="";if(this.product.is_on_sale)e='<div class="s-product-card-sale-price '.concat(this.card_center?"justify-center":"justify-start",'">\n                <h4>').concat(this.getPriceFormat(this.product.sale_price),"</h4>\n                <span>").concat(this.getPriceFormat(null===(t=this.product)||void 0===t?void 0:t.regular_price),"</span>\n              </div>");else if(this.product.starting_price){var n;e='<div class="s-product-card-starting-price da-tm '.concat(this.card_center?"justify-center":"justify-start",'">\n                  <p class="da-tm">').concat(this.startingPrice,'</p>\n                  <h4 class="color-primary"> ').concat(this.getPriceFormat(null===(n=this.product)||void 0===n?void 0:n.starting_price)," </h4>\n              </div>")}else{var o;e='<h4 class="s-product-card-price">'.concat(this.getPriceFormat(null===(o=this.product)||void 0===o?void 0:o.price),"</h4>")}return e}},{key:"getAddButtonLabel",value:function(){return"sale"===this.product.status&&"booking"===this.product.type?salla.lang.get("pages.cart.book_now"):"sale"===this.product.status?salla.lang.get("pages.cart.add_to_cart"):"donating"!==this.product.type?salla.lang.get("pages.products.out_of_stock"):salla.lang.get("pages.products.donation_exceed")}},{key:"getProps",value:function(){this.card_promo_bg=window.card_promo_bg,this.card_border_color=window.card_border_color,this.card_height=window.card_height,this.card_round=window.card_round,this.card_add_icon=window.card_add_icon,this.card_border=window.card_border,this.card_ratio=window.card_ratio,this.card_nobg=window.card_nobg,this.card_line=window.card_line,this.card_bold=window.card_bold,this.card_center=window.card_center,this.card_outline=window.card_outline,this.card_hide=window.card_hide,this.card_add_hide=window.card_add_hide,this.wish_hide=window.wish_hide,this.card_rating=window.card_rating,this.card_lazy=window.card_lazy,this.sale_end=window.sale_end,this.sale_date=window.sale_date,this.card_category=window.card_category,this.card_brand=window.card_brand,this.card_countdown=window.card_countdown,this.horizontal=this.hasAttribute("horizontal"),this.shadowOnHover=this.hasAttribute("shadowOnHover"),this.hideAddBtn=this.hasAttribute("hideAddBtn"),this.fullImage=this.hasAttribute("fullImage"),this.minimal=this.hasAttribute("minimal"),this.isSpecial=this.hasAttribute("isSpecial"),this.showQuantity=this.hasAttribute("showQuantity")}},{key:"render",value:function(){var t,e,n,o,a,r,i,s,c,d,l,u,h,p,f,m,g,v,_,b,y,w,j,P,S,O,k,A,x,I,L,R,C,z,B,E,F,q,T,D,H=this;this.classList.add("s-product-card-entry"),this.classList.add("rounded-".concat(this.card_round.length?card_round:"lg")),this.setAttribute("id",this.product.id),this.setAttribute("style","border-color:".concat(this.card_border?"transparent":card_border_color)),this.card_nobg&&this.classList.add("no-bg"),this.card_hide&&this.classList.add("hide-out-of-stock"),!(this.horizontal||this.fullImage||this.minimal)&&this.classList.add("s-product-card-vertical"),this.horizontal&&!this.fullImage&&!this.minimal&&this.classList.add("s-product-card-horizontal"),this.fitImageHeight&&!this.isSpecial&&!this.fullImage&&!this.minimal&&this.classList.add("s-product-card-fit-height"),this.isSpecial&&this.classList.add("s-product-card-special"),this.fullImage&&this.classList.add("s-product-card-full-image"),this.minimal&&this.classList.add("s-product-card-minimal"),null!==(t=this.product)&&void 0!==t&&t.donation&&this.classList.add("s-product-card-donation"),this.shadowOnHover&&this.classList.add("s-product-card-shadow"),null!==(e=this.product)&&void 0!==e&&e.is_out_of_stock&&this.classList.add("s-product-card-out-of-stock"),this.innerHTML='\n        <div class="'.concat(this.fullImage?"s-product-card-image-full":"s-product-card-image",'">\n          <a class="flex-center" href="').concat(null===(n=this.product)||void 0===n?void 0:n.url,'">\n            <img class="s-product-card-image-').concat(salla.url.is_placeholder(null===(o=this.product)||void 0===o||null===(a=o.image)||void 0===a?void 0:a.url)?"contain":this.fitImageHeight?this.fitImageHeight:"cover"," ").concat(this.card_lazy?"lazy__bg lazy_img lazy":"",'"\n              src="').concat(this.card_lazy?this.placeholder:(null===(r=this.product)||void 0===r||null===(i=r.image)||void 0===i?void 0:i.url)||(null===(s=this.product)||void 0===s?void 0:s.thumbnail),'"\n              alt="').concat(null===(c=this.product)||void 0===c||null===(d=c.image)||void 0===d?void 0:d.alt,'"\n              data-src="').concat((null===(l=this.product)||void 0===l||null===(u=l.image)||void 0===u?void 0:u.url)||(null===(h=this.product)||void 0===h?void 0:h.thumbnail),'"\n            style="aspect-ratio:9/').concat(card_height.length?card_height:"9",'"/>\n            ').concat(this.fullImage||this.minimal?"":this.getProductBadge(),"\n            ").concat(null===(p=this.product)||void 0===p||null===(f=p.rating)||void 0===f||!f.stars||this.minimal||this.card_rating?"":'<div class="s-product-card-rating">\n                <i class="sicon-star2"></i>\n                <span>'.concat(this.product.rating.stars,"</span>\n              </div>"),"\n            ").concat(null===(m=this.product)||void 0===m||!m.is_on_sale||this.card_ratio||this.product.is_out_of_stock?"":'\n                <div class="s-product-card-discount card-discount font-primary">\n                  <span class="off-ratio">\n                    '.concat(Math.round(100*(1-this.product.sale_price/this.product.regular_price)),"%\n                  </span>\n                </div>\n                "),"         \n          </a>\n          ").concat(this.fullImage?'<a href="'.concat(null===(g=this.product)||void 0===g?void 0:g.url,'" class="s-product-card-overlay"></a>'):"","\n        </div>\n        ").concat(this.card_countdown&&null!==(v=this.product)&&void 0!==v&&v.is_on_sale&&!this.product.is_out_of_stock&&(this.sale_end||this.product.discount_ends)?'\n        <div class="s-product-card-countdown">\n          <salla-count-down date="'.concat(this.sale_end?this.sale_date:this.parseDate(this.product.discount_ends),'" labeled digits="en"></salla-count-down>\n        </div>\n      '):"",'\n      \n        <div class="s-product-card-content">\n\n          ').concat(this.isSpecial&&null!==(_=this.product)&&void 0!==_&&_.quantity?'<div class="s-product-card-content-pie">\n              <span>\n                <b>'.concat(salla.helpers.number(null===(b=this.product)||void 0===b?void 0:b.quantity),"</b>\n                ").concat(this.remained,'\n              </span>\n              <svg xmlns="http://www.w3.org/2000/svg" viewBox="-2 -1 36 34" class="s-product-card-content-pie-svg">\n                <circle cx="16" cy="16" r="15.9155" class="s-product-card-content-pie-svg-base" />\n                <circle cx="16" cy="16" r="15.9155" class="s-product-card-content-pie-svg-bar" />\n              </svg>\n            </div>'):"",'\n\n          <div class="s-product-card-content-main ').concat(this.isSpecial?"s-product-card-content-extra-padding":"",'">\n          ').concat(this.card_brand&&this.card_category||!(null!==(y=this.product)&&void 0!==y&&null!==(w=y.category)&&void 0!==w&&w.name||null!==(j=this.product)&&void 0!==j&&null!==(P=j.brand)&&void 0!==P&&P.name)?"":'\n          <div class="s-product-card-props '.concat(this.card_center?"justify-center text-center":"",'">\n            ').concat(!this.card_category&&null!==(S=this.product)&&void 0!==S&&null!==(O=S.category)&&void 0!==O&&O.name?'\n            <span class="s-product-card-category">\n            '.concat(this.product.category.name,"\n            </span>\n            "):"","\n\n            ").concat(!this.card_brand&&null!==(k=this.product)&&void 0!==k&&null!==(A=k.brand)&&void 0!==A&&A.name?'\n            <span class="s-product-card-brand">\n            '.concat(this.product.brand.name,"\n            </span>\n            "):"","\n\n          </div>\n        "),'\n        \n            <h3 class="s-product-card-content-title ').concat(this.card_center?"text-center":""," ").concat(this.card_line?"line-clamp-1":"line-clamp-2"," ").concat(this.card_bold?"font-primary":"font-regular",'">\n              <a href="').concat(null===(x=this.product)||void 0===x?void 0:x.url,'">').concat(null===(I=this.product)||void 0===I?void 0:I.name,"</a>\n            </h3>\n\n            ").concat(null!==(L=this.product)&&void 0!==L&&L.subtitle&&!this.minimal?'<p class="s-product-card-content-subtitle '.concat(this.card_center?"text-center":"",'">').concat(null===(R=this.product)||void 0===R?void 0:R.subtitle,"</p>"):"","\n          </div>\n          ").concat(null===(C=this.product)||void 0===C||!C.donation||this.minimal||this.fullImage?"":"<salla-progress-bar donation=".concat(null===(z=this.product)||void 0===z?void 0:z.donation,' />\n          <div class="s-product-card-donation-input">\n            ').concat(null!==(B=this.product)&&void 0!==B&&null!==(E=B.donation)&&void 0!==E&&E.can_donate?'<label for="donation-amount-'.concat(this.product.id,'">').concat(this.donationAmount,' <span>*</span></label>\n              <input\n                type="text"\n                onInput="').concat((function(t){salla.helpers.inputDigitsOnly(t.target),H.addBtn.donatingAmount=t.target.value}),'"\n                id="donation-amount-').concat(this.product.id,'"\n                name="donating_amount"\n                class="s-form-control"\n                placeholder="').concat(this.donationAmount,'" />'):"","\n          </div>"),'\n          <div class="s-product-card-content-sub ').concat(this.card_center?"justify-center gap-2":"justify-between"," ").concat(this.isSpecial?"s-product-card-content-extra-padding":"",'">\n          ').concat(null!==(F=this.product)&&void 0!==F&&null!==(q=F.donation)&&void 0!==q&&q.can_donate?"":this.getProductPrice(),"\n          </div>\n\n          ").concat(this.isSpecial&&this.product.discount_ends?'<salla-count-down date="'.concat(this.formatDate(this.product.discount_ends),'" end-of-day=',!0," boxed=",!0,"\n              labeled=",!0," />"):"","\n\n\n          ").concat(this.hideAddBtn||this.card_add_hide?"":'<div class="s-product-card-content-footer rounded-'.concat(this.card_round.length?card_round:"lg",'">\n              <salla-add-product-button fill="').concat(this.card_outline?"outline":"primary",'" width="wide"\n                product-id="').concat(this.product.id,'"\n                product-status="').concat(this.product.status,'"\n                product-type="').concat(this.product.type,'">\n                ').concat("sale"==this.product.status?'<i class="text-[16px] sicon-'.concat("booking"==this.product.type?"calendar-time":this.card_add_icon.length?this.card_add_icon:"add",'"></i>'):"","\n                ").concat(this.product.add_to_cart_label?this.product.add_to_cart_label:this.getAddButtonLabel(),"\n              </salla-add-product-button>\n              ").concat(this.wish_hide?"":'<salla-button\n                  shape="icon"\n                  fill="outline"\n                  color="light"\n                  name="product-name-'.concat(this.product.id,'"\n                  aria-label="Add or remove to wishlist"\n                  class="s-product-card-wishlist-btn animated "\n                  onclick="salla.wishlist.toggle(').concat(this.product.id,')"\n                  data-id="').concat(this.product.id,'">\n                  <i class="sicon-heart"></i>\n                </salla-button>'),"\n            </div>"),"\n        </div>\n      "),this.querySelectorAll('[name="donating_amount"]').forEach((function(t){t.addEventListener("input",(function(t){t.target.closest(".s-product-card-content").querySelector("salla-add-product-button").setAttribute("donating-amount",t.target.value)}))})),salla.config.isGuest()||salla.storage.get("salla::wishlist",[]).forEach((function(t){return H.toggleFavoriteIcon(t)})),null===(T=document.lazyLoadInstance)||void 0===T||T.update(this.querySelectorAll(".lazy")),null!==(D=this.product)&&void 0!==D&&D.quantity&&this.isSpecial&&this.initCircleBar()}}]),r}((0,n("./node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js").default)(HTMLElement));customElements.define("custom-salla-product-card",c)})()})();